var module=angular.module("ngRateIt",["ng"]);module.directive("ngRateIt",["$q",function(a){"use strict";var b=function(b,c,d){d.readonly||(b.readonly=function(){return!1}),d.resetable||(b.resetable=function(){return!0}),d.beforerated||(b.beforerated=function(){var b=a.defer();return b.resolve(),b.promise}),d.rated||(b.rated=function(){}),d.beforereset||(b.beforereset=function(){var b=a.defer();return b.resolve(),b.promise}),d.reset||(b.reset=function(){}),d.over||(b.over=function(){})};return{scope:{ngModel:"=",min:"=?min",max:"=?max",step:"=?step",readonly:"&?readonly",ispreset:"=?ispreset",resetable:"&?resetable",starwidth:"=?starwidth",starheight:"=?starheight",rated:"=?rated",reset:"=?reset",over:"=?over",beforerated:"=?beforerated",beforereset:"=?beforereset"},templateUrl:"ngRateIt/ng-rate-it.html",require:"ngModel",replace:!0,link:b,controller:"ngRateItController"}}]).controller("ngRateItController",["$scope",function(a){"use strict";a.isHovering=!1,a.offsetLeft=0,a.orgValue=angular.copy(a.ngModel),a.hoverValue=0,a.min=a.min||0,a.max=a.max||5,a.step=a.step||.5,a.ispreset=a.orgValue===a.ngModel,a.starwidth=a.starwidth||16,a.starheight=a.starheight||16,a.resetCssOffset=4;var b=a.$watch("ngModel",function(){a.ispreset=a.orgValue===a.ngModel});a.removeRating=function(){a.resetable()&&!a.readonly()&&a.beforereset().then(function(){a.ngModel=a.min,a.reset()})},a.setValue=function(){if(a.isHovering&&!a.readonly()){var b=angular.copy(a.min+a.hoverValue);a.beforerated(b).then(function(){a.ngModel=b,a.isHovering=!1,a.rated()})}},a.onEnter=function(b){a.isHovering=!0,a.offsetLeft=b.originalTarget.getBoundingClientRect().x},a.onHover=function(b){a.isHovering=!0,a.hoverValue=Math.round((b.clientX-a.offsetLeft)/a.starwidth/a.step)*a.step,a.over(b,a.hoverValue)},a.onLeave=function(){a.isHovering=!1,a.hoverValue=0},a.$on("$destroy",function(){b()})}]).run(["$templateCache",function(a){"use strict";a.put("ngRateIt/ng-rate-it.html",'<div class="ngrateit" ng-class="{\'ngrateit-readonly\': readonly()}"><a class="ngrateit-reset" ng-mouseenter="resetCssOffset=5;" ng-mouseleave="resetCssOffset=4;" ng-if="!readonly() && resetable()" ng-click="removeRating()" ng-style="{\'width\': starwidth+\'px\', \'height\': starheight+\'px\', \'background-position\': \'0 \'+(-resetCssOffset*starheight)+\'px\'}"></a><div class="ngrateit-star_wrapper" ng-click="setValue()" ng-mouseenter="onEnter($event)" ng-mousemove="onHover($event)" ng-mouseleave="onLeave();" ng-style="{\'width\': ((max-min)*starwidth)+\'px\', \'height\': starheight+\'px\'}"><div class="ngrateit-background"></div>'+"<div class=\"ngrateit-value\" ng-hide=\"!readonly() && hoverValue>0 && hoverValue!==(ngModel-min)\" ng-style=\"{'width': (ngModel-min)*starwidth+'px', 'background-position': '0 '+(-2*starheight)+'px'}\"></div><div class=\"ngrateit-hover\" ng-if=\"!readonly() && hoverValue!==(ngModel-min)\" ng-style=\"{'width': hoverValue*starwidth+'px', 'background-position': '0 '+(-3*starheight)+'px'}\" ></div></div></div>")}]);